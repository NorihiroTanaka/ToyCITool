# ToyCITool 開発ガイドライン

このドキュメントは、ToyCITool プロジェクトの開発における共通ルールとプロセスを定めたものです。すべての開発者はこのガイドラインに従って実装を進めてください。

## 1. 言語設定

*   **コミュニケーション**: チャットおよびプルリクエスト等の議論はすべて **日本語** で行います。
*   **コードコメント/ドキュメント**: ソースコード内のコメント、Docstring、およびドキュメントは **日本語** で記述します。

## 2. プログラミングスタイル

本プロジェクトでは、Python において **関数型プログラミング** および **宣言型記述** を推奨します。状態変異を避け、副作用を最小限に抑えることで、テスト容易性と保守性を高めます。

### 推奨事項

*   **純粋関数 (Pure Functions)**:
    *   同じ入力に対して常に同じ出力を返し、外部の状態を変更しない関数を優先します。
    *   副作用（I/O操作、グローバル変数の変更など）を持つ処理は、明確に分離し、可能な限りシステムの境界（エッジ）に寄せます。

*   **不変性 (Immutability)**:
    *   可能な限り `NamedTuple` や `frozen=True` な `dataclass`、あるいは Pydantic モデル (`frozen=True`) を使用し、データの変更を避けます。
    *   既存のオブジェクトを変更するのではなく、新しい値を生成して返すスタイルを採用します。

*   **型ヒント (Type Hints)**:
    *   すべての関数の引数と戻り値に型ヒントを記述します。
    *   `mypy` 等の静的解析ツールでエラーが出ないようにします。

*   **宣言的記述**:
    *   「どのようにやるか (How)」ではなく「何をしたいか (What)」を記述するように心がけます。
    *   例: ループ処理よりもリスト内包表記、ジェネレータ式、`map`/`filter`、あるいは `itertools`/`functools` などの高階関数の活用を検討します。

## 3. 開発フロー

高品質なコードを維持するため、以下の順序で開発を進めます。

### Step 1: シグネチャ設計（インターフェース定義）

実装を始める前に、まず関数のシグネチャ（関数名、引数の型、戻り値の型）とデータ構造を定義します。

*   この段階では中身の実装は行わず、`pass` や `...` を使用するか、ダミーの戻り値を返すようにします。
*   Docstring に以下の情報を明確に記述します。
    *   関数の目的
    *   引数 (Args)
    *   戻り値 (Returns)
    *   発生する可能性のある例外 (Raises)

### Step 2: テストコード実装（契約プログラミング）

定義したシグネチャに基づき、期待される振る舞いを検証するテストコードを先に記述します（テスト駆動開発的なアプローチ）。

*   正常系だけでなく、異常系や境界値のテストも含めます。
*   テストが実行可能であることを確認します（この時点ではテストは失敗します）。
*   テストコードは「実行可能な仕様書」としての役割も果たします。

### Step 3: 実装

テストをパスするように関数の内部ロジックを実装します。

*   Step 1 で定義したシグネチャと契約（Docstringの内容）を満たすようにコードを書きます。
*   リファクタリングを行う際も、テストが通り続けることを確認しながら進めます。

## 4. プロジェクトのコアコンセプト

1.  **Docker非依存 (No Docker Dependency)**
    *   本ツールはコンテナ技術に依存せず、ホストOS上で直接動作することを前提とします。
    *   外部ミドルウェア（Redis, DB等）への依存を避け、Python標準ライブラリとOS機能で完結させる設計を優先します。

2.  **容易な設定 (Easy Configuration)**
    *   「Zero Config」を目指し、設定ファイル (`config.yaml`) なしでも動作する、あるいは最小限の記述で動作するデフォルト値を提供します。
    *   複雑な設定はオプションとし、シンプルさを最優先します。
